Please refactor the analyze.py script. It should produce the exact same 
output after the refactor.