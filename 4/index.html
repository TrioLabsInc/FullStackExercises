<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>React Todo Bug Demo</title>
  </head>
  <body>
    <div id="root"></div>

    <script type="module">
      import React, { useState } from "https://esm.sh/react@18";
      import ReactDOM from "https://esm.sh/react-dom@18";

      const INITIAL_TODOS = ["buy milk", "write tests"];

      function App() {
        const [todos, setTodos] = useState(INITIAL_TODOS);

        const addTodo = () => {
          todos.push(`todo ${todos.length + 1}`);
          setTodos(todos);
        };

        return React.createElement(
          React.Fragment,
          null,
          React.createElement("button", { onClick: addTodo }, "Add todo"),
          React.createElement(
            "ul",
            null,
            todos.map((todo) =>
              React.createElement("li", { key: todo }, todo)
            )
          )
        );
      }

      ReactDOM.createRoot(document.getElementById("root")).render(
        React.createElement(App)
      );
    </script>
  </body>
</html>
